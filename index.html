<script>
fetch("https://lotto-statistiche.onrender.com/api")
.then(response => response.json())
.then(data => {

    const contenitore = document.getElementById("contenitore");
    contenitore.innerHTML = "";

    let punteggi = {};

    Object.entries(data).forEach(([ruota, valori]) => {

        // Calcolo punteggio semplice
        punteggi[ruota] =
            valori.numero_frequente.reduce((a,b) => a+b,0) -
            valori.numero_ritardo.reduce((a,b) => a+b,0);

        const blocco = document.createElement("div");
        blocco.className = "ruota";

        blocco.innerHTML = `
            <h2>${ruota}</h2>

            <p><strong>Ultima estrazione:</strong></p>
            <div class="numeri">
                ${valori.ultima_estrazione.map(n => `<span>${n}</span>`).join("")}
            </div>

            <p><strong>Ambo strategico:</strong></p>
            <div class="numeri">
                ${valori.ambo_strategico.map(n => `<span>${n}</span>`).join("")}
            </div>

            <p><strong>Numero frequente:</strong></p>
            <div class="numeri">
                ${valori.numero_frequente.map(n => `<span>${n}</span>`).join("")}
            </div>

            <p><strong>Numero ritardo:</strong></p>
            <div class="numeri">
                ${valori.numero_ritardo.map(n => `<span>${n}</span>`).join("")}
            </div>

            <p><strong>Terno strategico:</strong></p>
            <div class="numeri">
                ${valori.terno_strategico.map(n => `<span>${n}</span>`).join("")}
            </div>

            <p><strong>Modalit√† Prudente:</strong> Ambo strategico</p>
            <p><strong>Modalit√† Aggressiva:</strong> Terno strategico</p>
        `;

        contenitore.appendChild(blocco);
    });

    // Trova ruota pi√π forte
    const ruotaTop = Object.keys(punteggi).reduce((a, b) =>
        punteggi[a] > punteggi[b] ? a : b
    );

    const evidenza = document.createElement("div");
    evidenza.style.textAlign = "center";
    evidenza.style.fontSize = "26px";
    evidenza.style.margin = "20px";
    evidenza.style.color = "yellow";
    evidenza.innerHTML = `üî• RUOTA PI√ô FORTE: ${ruotaTop}`;

    contenitore.prepend(evidenza);

})
.catch(error => {
    document.getElementById("contenitore").innerHTML =
        "<div class='error'>Errore caricamento dati</div>";
    console.error(error);
});
</script>










