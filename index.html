<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Lotto Live Statistiche</title>
  <style>
    body {
      background: #0f172a;
      color: white;
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    h1 {
      color: orange;
      text-align: center;
    }

    .card {
      background: #1e293b;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      border: 2px solid #334155;
    }

    .ruota-forte {
      border: 2px solid gold;
    }

    .premium-box {
      background: #111;
      padding: 20px;
      border-radius: 12px;
      border: 2px solid gold;
    }
  </style>
</head>
<body>

<h1>üî• Lotto Live Statistiche üî•</h1>

<div id="contenuto"></div>

<hr style="margin:40px 0; border:2px solid orange;">

<div class="premium-box">
  <h2 style="color:gold;">üéØ Giocate Attive Premium</h2>
  <div id="listaGiocate"></div>
</div>

<script>

const API_URL = "https://lotto-statistiche.onrender.com";

function caricaDati() {
  fetch(API_URL + "/api")
    .then(res => res.json())
    .then(data => {

      const container = document.getElementById("contenuto");
      container.innerHTML = "";

      const ruotaForte = data.ruota_forte;

      for (let ruota in data) {

        if (ruota === "ruota_forte") continue;

        const stats = data[ruota];

        let classe = "card";
        if (ruota === ruotaForte) {
          classe += " ruota-forte";
        }

        container.innerHTML += `
          <div class="${classe}">
            <h2>${ruota} ${ruota === ruotaForte ? "‚≠ê RUOTA FORTE" : ""}</h2>
            <p>Ultima estrazione: ${stats.ultima_estrazione.join(", ")}</p>
            <p>üî• Caldi: ${stats.caldi.join(", ")}</p>
            <p>‚ùÑÔ∏è Freddi: ${stats.freddi.join(", ")}</p>
            <p>‚è≥ Ritardatario: ${stats.ritardatario}</p>
            <p>üéØ DA GIOCARE: ${stats.da_giocare.join(", ")}</p>
            <p>üíé AMBI FORTI: ${stats.ambi_forti.map(a => a.join("-")).join(" | ")}</p>
            <p>‚ö° Indice Pressione: ${stats.indice_pressione}</p>
          </div>
        `;
      }

    });
}

function caricaGiocatePremium() {

  fetch(API_URL + "/giocate-attive")
    .then(res => res.json())
    .then(data => {

      const container = document.getElementById("listaGiocate");
      container.innerHTML = "";

      if (!data || data.length === 0) {
        container.innerHTML = "<p>Nessuna giocata attiva</p>";
        return;
      }

      data.forEach(g => {

        let colore = "lime";
        let statoTesto = "ATTIVO";

        if (g.stato === "scaduto") {
          colore = "red";
          statoTesto = "SCADUTO";
        }

        if (g.stato === "uscito") {
          colore = "gold";
          statoTesto = "USCITO üí∞";
        }

        container.innerHTML += `
          <div style="
            margin-bottom:15px;
            padding:15px;
            border:2px solid ${colore};
            border-radius:8px;
            background:#1a1a1a;
          ">
            <strong>${g.tipo.toUpperCase()} ${g.num1}-${g.num2}</strong><br>
            Ruota: ${g.ruota}<br>
            Durata: ${g.durata_attuale}<br>
            Passate: ${g.estrazioni_passate}<br>
            <span style="color:${colore}; font-weight:bold;">
              Stato: ${statoTesto}
            </span>
          </div>
        `;
      });

    });
}

caricaDati();
caricaGiocatePremium();

</script>

</body>
</html>
