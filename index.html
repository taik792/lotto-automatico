<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Lotto Live Statistiche</title>

<style>
body {
    margin:0;
    font-family:Arial;
    background:linear-gradient(to bottom,#0f2027,#203a43,#2c5364);
    color:white;
}

h1 {
    text-align:center;
    padding:20px;
    color:orange;
}

.container {
    width:90%;
    margin:auto;
}

.ruota {
    border:2px solid orange;
    border-radius:10px;
    padding:15px;
    margin:15px 0;
    background:rgba(0,0,0,0.4);
}

button {
    background:orange;
    border:none;
    padding:5px 10px;
    cursor:pointer;
    border-radius:5px;
    margin-top:5px;
}

.premium-box {
    border:2px solid gold;
    padding:15px;
    margin:20px 0;
    border-radius:10px;
    background:rgba(0,0,0,0.6);
}
</style>
</head>

<body>

<h1>ðŸ”¥ Lotto Live Statistiche ðŸ”¥</h1>

<div class="container">

<div class="premium-box">
<h2>ðŸŽ¯ Giocate Attive Premium</h2>
<div id="giocatePremium"></div>
</div>

<div id="ruote"></div>

</div>

<script>

let estrazioniData = {};

fetch("estrazioni.json")
.then(response => response.json())
.then(data => {
    estrazioniData = data;
    generaRuote();
})
.catch(error => {
    console.error("Errore caricamento JSON:", error);
});

function generaRuote() {

    const ordineRuote = [
        "Bari",
        "Cagliari",
        "Firenze",
        "Genova",
        "Milano",
        "Napoli",
        "Palermo",
        "Roma",
        "Torino",
        "Venezia",
        "Nazionale"
    ];

    const container = document.getElementById("ruote");
    container.innerHTML = "";

    ordineRuote.forEach(ruota => {

        if (!estrazioniData[ruota]) return;

        let ultima = estrazioniData[ruota][0];

        let div = document.createElement("div");
        div.className = "ruota";

        div.innerHTML = `
            <h3>${ruota}</h3>
            <p>Ultima estrazione: ${ultima.join(" - ")}</p>
            <button onclick="salvaGiocata('${ruota}', ${ultima[0]}, ${ultima[1]})">
                Salva ambo ${ultima[0]} - ${ultima[1]}
            </button>
        `;

        container.appendChild(div);

    });

    mostraGiocate();
}

function salvaGiocata(ruota, n1, n2) {

    let giocate = JSON.parse(localStorage.getItem("giocate")) || [];

    giocate.push({
        ruota: ruota,
        num1: n1,
        num2: n2
    });

    localStorage.setItem("giocate", JSON.stringify(giocate));

    mostraGiocate();
}

function mostraGiocate() {

    let box = document.getElementById("giocatePremium");
    let giocate = JSON.parse(localStorage.getItem("giocate")) || [];

    if (giocate.length === 0) {
        box.innerHTML = "Nessuna giocata attiva";
        return;
    }

    box.innerHTML = "";

    giocate.forEach((g, index) => {
        box.innerHTML += `
            <div>
                ${g.ruota} â†’ ${g.num1} - ${g.num2}
                <button onclick="rimuoviGiocata(${index})">X</button>
            </div>
        `;
    });
}

function rimuoviGiocata(index) {

    let giocate = JSON.parse(localStorage.getItem("giocate")) || [];

    giocate.splice(index, 1);

    localStorage.setItem("giocate", JSON.stringify(giocate));

    mostraGiocate();
}

</script>

</body>
</html>
