<!DOCTYPE html>
<html>
<head>
  <title>Lotto Live Statistiche</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #0f4c75, #3282b8);
      color: white;
    }

    h1 {
      text-align: center;
      padding: 20px;
    }

    .container {
      width: 90%;
      margin: auto;
    }

    .ruota {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
    }

    .numeri span {
      background: #ff5959;
      padding: 8px 12px;
      border-radius: 20px;
      margin: 5px;
      display: inline-block;
      font-weight: bold;
    }

    .errore {
      text-align: center;
      font-size: 22px;
      color: yellow;
      margin-top: 40px;
    }
  </style>
</head>

<body>

<h1>ðŸŽ¯ Lotto Live Statistiche</h1>

<div class="container" id="contenitore"></div>

<script>
fetch("/api")
  .then(response => response.json())
  .then(data => {

    const contenitore = document.getElementById("contenitore");
    contenitore.innerHTML = "";

    const punteggi = {};

    Object.entries(data).forEach(([ruota, valori]) => {

      // ðŸ”¢ Calcolo punteggio ruota
      const sommaFreq = valori.numero_frequente.reduce((a,b) => a+b,0);
      const sommaRit  = valori.numero_ritardo.reduce((a,b) => a+b,0);
      const punteggio = sommaFreq - (sommaRit / 2);

      punteggi[ruota] = punteggio;

      const blocco = document.createElement("div");
      blocco.className = "ruota";

      blocco.innerHTML = `
        <h2>${ruota}</h2>

        <p><strong>Ultima estrazione:</strong></p>
        <div class="numeri">
          ${valori.ultima_estrazione.map(n => `<span>${n}</span>`).join("")}
        </div>

        <p><strong>Numero frequente:</strong></p>
        <div class="numeri">
          ${valori.numero_frequente.map(n => `<span>${n}</span>`).join("")}
        </div>

        <p><strong>Numero ritardo:</strong></p>
        <div class="numeri">
          ${valori.numero_ritardo.map(n => `<span>${n}</span>`).join("")}
        </div>

        <p><strong>Ambata strategica (prudente):</strong>
        ${valori.numero_frequente[0]}</p>

        <p><strong>Terno strategico (aggressivo):</strong>
        ${valori.numero_frequente.slice(0,3).join(" - ")}</p>
      `;

      contenitore.appendChild(blocco);
    });

    // ðŸ† Trova ruota piÃ¹ forte
    const ruotaTop = Object.keys(punteggi).reduce((a,b)=>
      punteggi[a] > punteggi[b] ? a : b
    );

    const evidenza = document.createElement("div");
    evidenza.style.textAlign = "center";
    evidenza.style.fontSize = "28px";
    evidenza.style.margin = "20px";
    evidenza.style.color = "yellow";
    evidenza.innerHTML = `ðŸ”¥ RUOTA PIÃ™ FORTE: ${ruotaTop}`;

    contenitore.prepend(evidenza);

  })
  .catch(error => {
    document.getElementById("contenitore").innerHTML =
      "<div class='error'>Errore caricamento dati</div>";
    console.error(error);
  });
</script>


</body>
</html>














