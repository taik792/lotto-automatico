<!DOCTYPE html>
<html>
<head>
<title>Lotto Live Statistiche</title>
<style>
body {
    font-family: Arial;
    background: linear-gradient(to bottom, #0f4c81, #1b6ca8);
    color: white;
    text-align: center;
}

.container {
    width: 80%;
    margin: auto;
}

.ruota {
    background: rgba(255,255,255,0.1);
    padding: 20px;
    margin: 20px 0;
    border-radius: 15px;
}

.numeri span {
    background: gold;
    color: black;
    padding: 10px 15px;
    margin: 5px;
    border-radius: 50%;
    display: inline-block;
    font-weight: bold;
}

.forte {
    border: 3px solid orange;
}

button {
    padding: 10px 20px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}
</style>
</head>
<body>

<h1>ðŸŽ¯ Lotto Live Statistiche</h1>

<button onclick="modalita('prudente')">ModalitÃ  Prudente</button>
<button onclick="modalita('aggressiva')">ModalitÃ  Aggressiva</button>

<h2 id="ruotaForte"></h2>

<div class="container" id="contenitore"></div>

<script>

let datiGlobali = {};
let tipoGioco = "prudente";

function modalita(tipo){
    tipoGioco = tipo;
    carica();
}

async function carica(){
    try{
        let response = await fetch("https://lotto-statistiche.onrender.com/api");
        let dati = await response.json();
        datiGlobali = dati;
        mostra(dati);
    } catch {
        document.getElementById("contenitore").innerHTML = "<h2>Errore caricamento dati</h2>";
    }
}

function mostra(dati){

    let cont = document.getElementById("contenitore");
    cont.innerHTML = "";

    let maxSomma = 0;
    let ruotaForte = "";

    for(let ruota in dati){

        let estrazioni = dati[ruota];
        let ultima = estrazioni[estrazioni.length - 1];

        let somma = ultima.reduce((a,b)=>a+b,0);

        if(somma > maxSomma){
            maxSomma = somma;
            ruotaForte = ruota;
        }
    }

    document.getElementById("ruotaForte").innerHTML = "ðŸ”¥ RUOTA PIÃ™ FORTE: " + ruotaForte;

    for(let ruota in dati){

        let estrazioni = dati[ruota];
        let ultima = estrazioni[estrazioni.length - 1];

        if(tipoGioco === "prudente"){
            ultima = ultima.slice(0,3);
        }

        let div = document.createElement("div");
        div.className = "ruota";

        if(ruota === ruotaForte){
            div.classList.add("forte");
        }

        div.innerHTML = "<h3>"+ruota+"</h3><div class='numeri'>";

        ultima.forEach(n=>{
            div.innerHTML += "<span>"+n+"</span>";
        });

        div.innerHTML += "</div>";

        cont.appendChild(div);
    }
}

carica();

</script>

</body>
</html>
